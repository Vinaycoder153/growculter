<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WorkTracker - Time & Money Management</title>

    <!-- Fonts: Noto Sans for multilingual support -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Icons: FontAwesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Application Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- APP CONTAINER -->
    <div id="app"></div>

    <!-- AUTH TEMPLATE -->
    <template id="tpl-auth">
        <div id="auth-screen">
            <div class="card auth-box">
                <div class="text-center" style="margin-bottom: 1.5rem;">
                    <i class="fa-solid fa-wallet fa-2x" style="color: var(--primary);"></i>
                    <h2 class="text-lg mt-4" data-i18n="appName">WorkTracker</h2>
                </div>
                <form id="login-form">
                    <div class="input-group">
                        <label for="username" data-i18n="username">Username</label>
                        <input type="text" id="username" aria-label="Username" class="form-control" required placeholder="admin@example.com">
                    </div>
                    <div class="input-group">
                        <label for="password" data-i18n="password">Password</label>
                        <input type="password" id="password" aria-label="Password" class="form-control" required placeholder="password123">
                    </div>
                    <button type="submit" class="btn btn-primary w-full" data-i18n="login">Login</button>
                    <p class="text-sm text-center mt-4 text-muted">
                        Demo credentials available on signup<br>
                        <small>Firebase Authentication enabled</small>
                    </p>
                </form>
            </div>
        </div>
    </template>

    <!-- DASHBOARD TEMPLATE -->
    <template id="tpl-dashboard">
        <div class="dashboard-layout">
            <!-- Sidebar Navigation -->
            <aside class="sidebar" id="sidebar">
                <div class="logo">
                    <i class="fa-solid fa-wallet"></i>
                    <span data-i18n="appName">WorkTracker</span>
                </div>
                <nav>
                    <div class="nav-item active" onclick="Router.navigate('home')">
                        <i class="fa-solid fa-chart-line"></i>
                        <span data-i18n="navHome">Overview</span>
                    </div>
                    <div class="nav-item" onclick="Router.navigate('entries')">
                        <i class="fa-solid fa-list"></i>
                        <span data-i18n="navEntries">Work Entries</span>
                    </div>
                    <div class="nav-item role-admin" onclick="Router.navigate('users')">
                        <i class="fa-solid fa-users"></i>
                        <span data-i18n="navUsers">Users</span>
                    </div>
                    <div class="nav-item" onclick="Router.navigate('settings')">
                        <i class="fa-solid fa-gear"></i>
                        <span data-i18n="navSettings">Settings</span>
                    </div>
                </nav>
                <div style="margin-top: auto;">
                    <button class="btn btn-outline w-full" onclick="AuthHandler.logout()">
                        <i class="fa-solid fa-sign-out-alt"></i>
                        <span data-i18n="logout">Logout</span>
                    </button>
                </div>
            </aside>

            <!-- Main Content Area -->
            <main class="main-content">
                <header class="header-bar">
                    <div class="flex items-center gap-4">
                        <button class="btn btn-outline mobile-toggle" onclick="document.getElementById('sidebar').classList.toggle('mobile-open')">
                            <i class="fa-solid fa-bars"></i>
                        </button>
                        <h2 class="text-lg" id="page-title">Dashboard</h2>
                    </div>
                    <div class="flex items-center gap-2">
                        <button class="btn btn-outline" onclick="app.ui.toggleTheme()" title="Toggle Theme">
                            <i class="fa-solid fa-moon"></i>
                        </button>
                        <select class="form-control" style="width: auto;" onchange="I18n.setLang(this.value)" id="lang-select">
                            <option value="en">English</option>
                            <option value="kn">ಕನ್ನಡ</option>
                            <option value="hi">हिंदी</option>
                            <option value="ta">தமிழ்</option>
                        </select>
                        <div class="text-sm font-bold" id="user-display-name">User</div>
                    </div>
                </header>

                <div id="view-container">
                    <!-- Dynamic View Content Rendered Here -->
                </div>
            </main>
        </div>
    </template>

    <!-- MODAL TEMPLATE -->
    <template id="tpl-modal">
        <div class="modal-overlay hidden" id="modal-overlay">
            <div class="modal-content">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg" id="modal-title">Title</h3>
                    <button class="btn btn-outline" onclick="app.ui.closeModal()">✕</button>
                </div>
                <div id="modal-body"></div>
            </div>
        </div>
    </template>

    <!-- EXTERNAL SCRIPTS -->

    <!-- Firebase SDK v10.7.0 -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js"></script>

    <!-- Application Scripts (Load in order) -->
    <script src="config.js"></script>
    <script src="utils/math.js"></script>
    <script src="utils/i18n.js"></script>
    <script src="utils/firebase.js"></script>
    <script src="db/database.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/router.js"></script>
    <script src="js/controllers.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
